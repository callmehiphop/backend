/*!
 * backend.js - v0.0.2
 * github.com/callmehiphop/backend.js
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b():a.backend=b()}(this,function(a){"use strict";var b=Array.prototype.slice,c=function(a,b,c){for(var d=0;d<a.length&&b.call(c||this,a[d],d,a)!==!1;d++);},d=function(a){return c(b.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},e=function(a,b){var c={};for(var d in a)k(a[d])||b&&!a[d]||(c[d]=a[d]);return c},f=function(a){var b=[];for(var c in a)b.push(c);return b},g=function(a,b){var d=a.slice(0);return c(b,function(a){~d.indexOf(a)||d.push(a)}),d.sort()},h=function(a,b){if(!l(a))return a===b;var d=g(f(a),f(b)),e=!0;return c(d,function(c){return a[c]===b[c]||(l(a[c])||l(b[c]))&&h(a[c],b[c])?void 0:(e=!1,!1)}),e},i=function(a,b){for(var c in b)if(a[c]!==b[c])return!1;return!0},j=function(a){return function(b){return typeof b===a}},k=j("function"),l=j("object"),m=j("number"),n=j("string"),o=function(a){var b="";for(var c in a)b+=c+"="+a[c]+"&";return b.slice(0,-1)},p=function(a){var b={};return a.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e}),b},q=[],r=function(a,b,c,d){this.method=a.toUpperCase(),this.url=b instanceof RegExp?b:w(b),this.data=c,this.headers=d};d(r.prototype,{match:function(a,b,c,d){return this.url.test(b)&&this.method===a.toUpperCase()&&(!this.headers||i(d,this.headers))&&h(this.data,c)?!0:!1}});var s=/\((.*?)\)/g,t=/(\(\?)?:\w+/g,u=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#\s]/g,w=function(a){return a=a.replace(v,"\\$&").replace(s,"(?:$1)?").replace(t,function(a,b){return b?a:"([^/]+)"}).replace(u,"(.*?)"),new RegExp("^"+a+"$")},x=window.XMLHttpRequest,y=function(){return x?new x:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):void 0};window.XMLHttpRequest=function(){var b,g,h={headers:{}};d(this,{onabort:null,onerror:null,onload:null,onloadend:null,onloadstart:null,onprogress:null,onreadystatechange:null,readyState:0,response:"",responseText:"",responseType:"",responseXML:null,status:0,statusText:"",withCredentials:!1,open:function(a,b,c,d,e){h.method=a,h.url=b,h.async=c,h.username=d,h.password=e},send:function(i){var j,m;if(i=i||a,j=n(i)?p(i):i,c(q,function(a){return a.match(h.method,h.url,j,h.headers)?(m=a,!1):void 0}),m){var o=m.response.data;l(o)&&(o=JSON.stringify(o)),d(this,{readyState:4,status:m.response.status,response:o,responseText:o}),b=m.response.headers||{},k(this.onreadystatechange)&&this.onreadystatechange()}else{var r=this;g=y(),g.open(h.method,h.url,h.async,h.username,h.password),g.onreadystatechange=function(){d(r,e(this,!0)),k(r.onreadystatechange)&&r.onreadystatechange()},c(f(h.headers),function(a){this.setRequestHeader(a,h.headers[a])},g),g.send(i)}},setRequestHeader:function(a,b){h.headers[a]=b},getResponseHeader:function(a){return g?g.getResponseHeader(a):b[a]},getAllResponseHeaders:function(){return g?g.getAllResponseHeaders():o(b)},abort:function(){g&&g.abort()}})};var z={};z.when=function(a,b,c,d){var e=new r(a,b,c,d);return q.push(e),{respond:function(a,b,c){e.response=A(a,b,c)}}};var A=function(a,b,c){return m(a)?{status:a,data:b,headers:c}:{status:200,data:a,headers:b}};return c(["get","delete","jsonp"],function(b){z[b]=function(c,d){return z.when(b,c,a,d)}}),c(["put","post","patch"],function(a){z[a]=function(b,c,d){return z.when(a,b,c,d)}}),String.prototype.on=function(a,b,c){return z.when(a,this,b,c)},z});
//# sourceMappingURL=backend.js.map